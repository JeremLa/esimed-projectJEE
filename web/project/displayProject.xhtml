<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                template="../layout.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:mep="http://MicroEnterpriseProject/tags">
    <f:metadata>
        <f:event listener="#{clientController.initAskedClient(param['id'])}" type="preRenderView"/>
        <f:event listener="#{clientController.setEditMode(true)}" type="preRenderView"/>
        <f:event listener="#{app.setTitle('Liste clients')}" type="preRenderView" />
        <f:event listener="#{billListController.getByClient(clientController.client)}" type="preRenderView"/>
        <f:event listener="#{billListController.setFromClient(true)}" type="preRenderView"/>
    </f:metadata>

    <ui:define name="content">
        <p:panel header="#{clientController.client.firstName} #{clientController.client.lastName}" >
            <p:tabView orientation="left">
                <p:tab title="Information personnel">
                    <p:panel>
                        <mep:createClientForm />
                    </p:panel>
                </p:tab>
                <p:tab title="Pojets">
                    <p:panel>
                        <mep:projectList projects="#{clientController.getClientProjects()}"/>
                    </p:panel>
                </p:tab>
                <p:tab title="Factures">
                    <p:panel>
                        <mep:billList/>
                    </p:panel>
                </p:tab>
            </p:tabView>
        </p:panel>
    </ui:define>

</ui:composition>